# 회귀직선 (Regression Line)

## 기울기와 절편
* 하나의 직선은 `기울기`와 `절편`으로 나뉘게 되며,
    * `절편`은 **x가 0**일때, **y값**을 의미한다.
    * `기울기`는 **x가 1단위** 증가할 때, **y가 증가하는 정도**를 의미
* 회귀직선의 `기울기`는 `r(상관계수) * SDy/SDx`이다.
* 이 회귀직선에 대응하는 방정식을 `회귀방정식`이라고 한다.
* `회귀방정식`은 x의 정보를 바탕으로 y를 추정할 뿐이며, 그 이상의 의미는 없다.
* `기울기`는 **외부의 개입에 따른** x의 변화에 따라 y값이 얼마나 변하는지를 알려준다.
* 이러한 회귀는 외부의 `혼동요인`에 의해 얼마든지 영향을 받을 수 있는데, 이는 `중회귀분석`으로 통계적 통제가 가능하다.
* 물론 이러한 회귀는 모집단이 아닌 **관측된 일부 표본** 하에서만 유효하다.

## 최소자승법
* 산포도 상의 점을 가장 잘 반영하는 직선은 점들과 최대한 가까워야 한다.
* 이를 위해서는 실제 관측점과 회귀직선 사이의 거리를 정의하고, 이를 최소화한다.
* 그 수치를 `최소자승추정량`으로 칭하며, 이러한 거리의 평균은 `RMSE` 방식으로 구한다.    
즉, 회귀직선은 `RMSE`를 최소로 만드는 직선에 해당한다.
* 통상적으로 통계학자들은 `추정값`을 더 중시하는데, 이는 일회성 관측값이 아닌 **여러 Trial의 평균**을 낸 것이므로 오차가 어느정도 상쇄가 된다.
* 단, `외삽` 같이 아예 일정 범위를 넘어가는 통계 데이터에는 적용되지 않는다.

## 회귀분석의 한계
* `회귀직선`은 데이터가 **비선형**일 경우 그 설명성을 잃는다.
* 이에 더해서 설령 `회귀직선`이 만들어졌다고 하더라도, **항상 의미있지는 않다.**

## 중회귀분석 (Multiple Regression)
* 다른 `혼동요인`이 두 변수에 영향을 미쳐 **순수한 관계를 왜곡**하는 경우 고려하는 통계적 기법이다.
* 의심되는 `혼동요인`을 회귀식에 집어넣어 회귀를 실행하면, 관련된 변수가 나온다.
* 양적인 변수뿐만이 아닌 질적인 변수도 `더미변수`라는 개념을 통해서 회귀에 사용할 수 있다.

## 총변동의 분해
* `총변동`은 **실제 관측값과 해당하는 변수의 평균 값의 차이**다.
* 이 변동 중에서는 회귀직선으로 설명되는 것 (`SSR`)과 설명되지 않는 것(`SSE`)가 있다.
* 설명되지 않는 부분은 회귀식에 반영된 다양한 변수가 아닌, **외부의 다른 변수**로 인해 변화가 생긴 경우.
  
### R^2와 Adjusted-R^2
* 회귀직선의 설명도의 척도는 `R^2`로 이는 **SSR/SST** = **1-SSE/SST**이다.
* 중회귀분석이 아닌 `단순회귀분석`인 경우 설명도 `R^2`는 `r^2`과 같다.
* 회귀직선 간의 설명력을 비교하려는 경우에는 단순히 `R^2`로 비교하면 안된다.    
  (**왜?** 설명변수가 많아질수록 *R^2*는 높아지며, 많은 설명변수가 높은 설명력을 보장하지는 않는다.)
* 대신에 `adjusted R^2`라는 척도를 사용하며, 이는 1-(SSE/n-k-1)/(SST/n-1)로 구한다.    
  (**n-k-1**로 나누는건 **SSE** 안의 설명변수가 k개 있으면 **절편 1개 + 기울기 k개, 즉 k+1개**의 모수를 추정해야!)

## 최소자승법의 수식적 표현
> 회귀직선인 **y = a + bx_i + u_i**가 있다고 가정할 때,    
> 1) a는 _y_bar - b*x_bar_
> 2) b는 _(n * sig(x_i * y_i) - sig(x_i * y_i))/*n * sig(x_i^2) - sig(x_i^2))_ 이다.
> 3) 이는 곧 _sig_(i=1~n)((x_i-x_bar)*(y_i-y_bar))/sig(x_i-x_bar)^2_ = _r * SDy/SDx_

## 집단의 수가 여럿일 때 더미변수?
* 전체가 **n개의 집단**으로 이루어져 잇다면, (n-1)개의 **더미변수**를 추가한다.
* 분기별 시계열자료를 이용하면 `y_t = a + b1D_1t + b2D_2t + b3D_3t + u_t`이다.
> `y_t = a + b1D_1t + b2D_2t + b3D_3t + u_t`에 대해,    
> 1) y_t = t기의 전체 매출액
> 2) D1, D2, D3 = 제1기, 제2기, 제3분기
> 3) D_1t, D_2t, D_3t = 각각의 사분기 더미변수
* 각 분기의 평균 매출액을 알아보고 싶으면 해당 분기의 **더미변수만 조작**하면 된다.    
  (`u_t`는 집단 내 편차에 해당하므로 그 평균은 0이다.)
* 만약 각 분기와 4분기의 매출액 차이를 알아보고 싶으면, `각 분기 더미 = 0`의 가설검정을 실시한다.
* 만약 각 분기 사이의 차이를 알아보고 싶으면, `비교1분기 더미 - 비교2분기 더미 = 0`의 가설검정을 실시


