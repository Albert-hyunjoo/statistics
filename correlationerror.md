# 회귀분석의 오차

## 실제값과 추정치의 차이
* `회귀직선` 상의 예측값은 실제값과의 **차이가 분명히 존재한다**.
* `제곱근-평균-제곱 오차 (RMSE)`는 **회귀직선 상**의 **예측치**와 **실제값**의 차이를 대체적으로 보여주는 지표!    
  -> `표준편차`가 **개별 관측치**와 **평균 차이**를 알려주는 것과 유사하다.
* **준거집단** 형성 후 **몸무게룰 예측**하고 **실제값과 비교**했을 때, 그 차이는 `잔차`이다.
* `잔차 (추정오차)`의 전반적인 크기는 `(각 샘플의 오차 제곱의 함 / 샘플 - 2)의 제곱근`
    * _왜 -2인가?_ 추정치는 `회귀직선`으로 얻어지며, 그 직선은 `절편`과 `기울기`에 의해 형성된다.
* `회귀직선`과 `RMSE`를 알면 `68-95% 법칙`, 즉 +1 `RMSE`안에 **68%의 자료**가 분포함을 할 수 있다.
* 만약 y가 단지 **수평선**이라면, 이 경우의 `RMSE`는 y의 표준편차 SDy와 같다 (평균으로부터의 편차의 RSE)

## 두 변수 간 상관계수를 활용한 RMSE
* *수평선이 아닌* 회귀직선의 RMSE는 대략 `(1-r^2의 제곱근) * SDy`로 구할 수 있다.    
  (여기서 r는 **상관계수**에 해당한다)
* `RMSE`의 단위는 통상적으로 y (추정 변수) 의 단위를 따라간다.
* 단, 자유도로 나누는 개수가 다르므로 **대략적으로 같으며** 데이터 크기가 많아지면 무시될 수 있다.
* 단, 회귀직선으로 `외삽`이 포함된 통계나, 아예 다른 `준거 집단`에서 활동하면 무용지물이 된다.

## 잔차도 (Residual Plot)
* 산포도의 각 점을 `잔차도`로 옮기면, 대체로 x, y의 잔차가 규형을 이룬다.
* 만약 분포 상에서 기묘한 관계가 발견된다면 `체계적인 비선형'이 나타날 수 있으므로 회귀분석을 제한한다.

## 세로띠와 등분산성

* 어떠한 데이터의 **특정 집단에 속하는 그룹**이 있다고 가정했을 때,     
  그 데이터의 분포의 중심 (**평균**)은 다를지언정 **표준편차** (퍼진 정도) 다 같다면     
  이는 `등분산성`이 있음을 보여준다.
* 이와 반대되는 개념은 `이분산성`으로, 만약 분포에서 발생 시에는 `RMSE`는 세로띠별 추정오차를 알려주지는 못한다.

### 세로띠 안의 분포 정규분포로 근사

* (등분산성 보장 하에) 세로띠 안의 점들의 분포를 '정규분포'로 근사시킬 수 있다.
> 2021년 1학기에 계량경제학 과목 수강 학생 대상으로 중간고사 (0-50) 및 기말고사 점수 (0-100)를 조사했다.     
> (1) **기말고사** 점수가 **66점 이상**인 학생은 전체의 몇 %쯤 되나?    
> (2) **중간고사 점수가 33점**인 학생들 중에서 **기말고사가 66점** 이상인 학생은 몇 %쯤? 

|1학기 정보|수치|
|:---:|:---:|
|중간고사 평균|27.9|
|기말고사 평균|56.4
|상관계수 (r)|0.49|
|표준편차 (중간)|8.5|
|표준편차 (기말)|13.8

#### 첫번째 문제의 해답 :

1) 나온 통계치를 기준으로 표준화를 실시 ((66-56.4)/13.8)
2) 여기서 나온 값 `0.7`을 `z-분포`와 비교한다면 이에 해당하는 값은 `0,24 = 24%`

#### 두번째 문제의 해답 :
[여기서 분포가 *타원형*으로 *등분산성*이 보장되어 있다.]
1) 먼저 *중간고사 점수가 33점*인 새로운 준거 집단을 구해야 한다.
  * 중간고사 점수 33점 - 27.9 = `5.1점` 이므로 표준편차인 `8.5점`과 비교해 `0.6SDx` 만큼 높다.
  * 상관계수 r = `0.49`이므로 이들의 기말고사 점수는 0.49 x 0.6 = `0.294SDy`, 즉 0.3 * 13.8 = `4.1`만큼 높다.
  * 즉, 이 준거집단의 **새로운 평균**은 56.4 + 4.1 = `60.5`점이다.
  * 표준편차의 경우 `sqrt(1-r^2) * SDy`공식에 따라 13.8 * sqrt(1-0.49^2) = `12점`이다.
2) 준거 집단의 새로운 평균 `60.5` 및 표준 편차 `12`를 바탕으로 **표준화**를 실시한다.
* (66-60.5)/12 = `0.46` 이므로 이를 `z-표`와 비교하면 해당하는 영역은 `0.32 = 32%`이다.

## 전반적인 정리에 대해서
* `잔차`는 실제 관측값 `yi`와 `y_hat = a + bxi`의 차이
* `잔차`를 제곱하여 더한 값을 `SSE (오차제곱합)`라고 한다.
* `오차제곱합`을 `자유도`로 나누면 오차항의 분산에 대한 추정량인 `MSE`가 된다.
* `MSE`를 제곱근화 하면 그것이 바로 `RMSE`이다.
